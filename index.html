<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campar</title>
    <link rel="icon" href="favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="appicono.png" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: url('fondo.png') no-repeat center center fixed;
            background-size: cover;
            overflow: hidden;
        }

        .lobby-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            position: absolute;
        }

        .logo {
            max-width: 30%;
            max-height: 30%;
            object-fit: contain;
            cursor: pointer;
        }

        .game-container {
            display: none;
            position: relative;
            width: 320px;
            height: 320px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .score {
            text-align: center;
            font-size: 20px;
            font-family: Arial, sans-serif;
            font-weight: bold;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px;
            width: 100%;
            position: absolute;
            top: 10px;
            text-align: center;
        }

        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
            background: #f4f4f4;
        }
    </style>
</head>
<body>
    <div class="lobby-container" id="lobbyContainer">
        <img src="logo.png" alt="Logo" class="logo" id="startGame">
    </div>

    <div class="game-container" id="gameContainer">
        <div class="score" id="scoreDisplay">Puntaje: 0</div>
        <canvas id="gameCanvas" width="300" height="300"></canvas>
    </div>

    <script>
       const canvas = document.getElementById("gameCanvas");
       const ctx = canvas.getContext("2d");
       const startGameButton = document.getElementById("startGame");
       const gameContainer = document.getElementById("gameContainer");
       const scoreDisplay = document.getElementById("scoreDisplay");
       let snake, direction, food, score, gameInterval, gameOver;
       
       function startGame() {
           document.getElementById("lobbyContainer").style.display = "none";
           gameContainer.style.display = "flex";
           snake = [{x: 50, y: 50}, {x: 40, y: 50}, {x: 30, y: 50}];
           direction = "RIGHT";
           food = {x: 100, y: 100};
           score = 0;
           gameOver = false;
           scoreDisplay.textContent = "Puntaje: " + score;
           clearInterval(gameInterval);
           gameInterval = setInterval(gameLoop, 100);
       }

       startGameButton.addEventListener("click", startGame);
       document.addEventListener("click", () => { if (gameOver) startGame(); });
       document.addEventListener("touchstart", () => { if (gameOver) startGame(); });

       document.addEventListener("keydown", event => {
           if (!gameOver) {
               if (event.key === "ArrowUp" && direction !== "DOWN") direction = "UP";
               if (event.key === "ArrowDown" && direction !== "UP") direction = "DOWN";
               if (event.key === "ArrowLeft" && direction !== "RIGHT") direction = "LEFT";
               if (event.key === "ArrowRight" && direction !== "LEFT") direction = "RIGHT";
           }
       });

       function gameLoop() {
           let head = { ...snake[0] };
           if (direction === "UP") head.y -= 10;
           if (direction === "DOWN") head.y += 10;
           if (direction === "LEFT") head.x -= 10;
           if (direction === "RIGHT") head.x += 10;
           
           snake.unshift(head);
           if (head.x === food.x && head.y === food.y) {
               score++;
               scoreDisplay.textContent = "Puntaje: " + score;
               food = {x: Math.floor(Math.random() * 30) * 10, y: Math.floor(Math.random() * 30) * 10};
           } else {
               snake.pop();
           }
           
           if (head.x < 0 || head.y < 0 || head.x >= canvas.width || head.y >= canvas.height || snake.slice(1).some(seg => seg.x === head.x && seg.y === head.y)) {
               clearInterval(gameInterval);
               gameOver = true;
               return;
           }
           
           ctx.clearRect(0, 0, canvas.width, canvas.height);
           ctx.fillStyle = "#F20000";
           ctx.fillRect(food.x, food.y, 10, 10);
           
           snake.forEach((seg, index) => {
               ctx.fillStyle = index % 2 === 0 ? "#FFD62C" : "#321311";
               ctx.fillRect(seg.x, seg.y, 10, 10);
           });
       }
    </script>
</body>
</html>
